function DoSearch(e){var t=$.trim(e),d=t.length;$(".search_product").empty(),$(".search_category").empty(),$(".search_brand").empty(),$(".search-modal").empty(),0<d?$.ajax({type:"GET",url:"/search_text/",dataType:"json",data:{search_text:t},success:function(d){$(".search-result").css("display","block");var t="",a="",o="",r="";if($.each(d.brandModel,function(e){t+="<li>",t+="<a class='sp-brand' href='/brand/"+d.brandModel[e].slug+"'>"+d.brandModel[e].name+"</a>",t+="</li>"}),$.each(d.categoryModel,function(e){a+="<li>",a+="<a class='sp-category' href='/"+d.categoryModel[e].slug+"'>"+d.categoryModel[e].name+"</a>",a+="</li>"}),$.each(d.productModel,function(e){if(e<=4){o+="<li>",o+="<a class='product' data-toggle='modal' href='javascript:;' data-target='#searchProductModal"+d.productModel[e].id+"'>",""!=d.productModel[e].logo_image?o+="<div class='sp-image'><img src='"+d.productModel[e].logo_image+"' alt='"+d.productModel[e].name+"' width='50px' height='50px'/></div>":o+="<div class='sp-image'><img src='/static/img/placeholder.png' alt='"+d.productModel[e].name+"' width='50px' height='50px'/></div>",o+="<div class='sp-content'><h2 class='sp-title'>"+d.productModel[e].name+"</h2>",null!==d.productModel[e].short_description&&""!==d.productModel[e].short_description&&(o+="<div class='sp-unit'>",o+="<h5 class='sp-value'>"+d.productModel[e].short_description+"</h5>"),!0===d.productModel[e].discounted?o+="<span class='sp-price'>$ "+d.productModel[e].discount_rate+"<span class='was'>$ "+d.productModel[e].price+"</span></h5>":o+="<h5 class='sp-price now'>$ "+d.productModel[e].price+"</h5>",o+="</div>",o+="</div>",o+="</a>",o+="</li>",r+="<div class='modal fade category-section' id='searchProductModal"+d.productModel[e].id+"' tabindex='-1' role='dialog' aria-labelledby='exampleModalLabel' aria-hidden='true'>",r+="<div class='modal-dialog' role='document'>",r+="<div class='modal-content'>",r+="<div class='modal-body'>",r+="<button type='button' class='close' data-dismiss='modal' aria-label='Close'><span aria-hidden='true'>Close &times;</span></button>",r+="<div class='row h-100 align-items-center'>",r+="<div class='col-sm-7' style='min-height: 100%;'>",r+="<div class='wishlist-box' style='top:5px; right: 40px;'><a href='#' title='Add to Wishlist' class='wishlist-icon' data-wishlist-product='"+d.productModel[e].id+"'>'&nbsp;</a></div>",r+="<div class='product-img text-center'>",null!==d.productModel[e].logo_image&&""!==d.productModel[e].logo_image?r+="<img src='"+d.productModel[e].logo_image+"' alt='"+d.productModel[e].name+"' class='img-fluid modal-img'/>":r+="<img src='/static/img/placeholder.png' alt='"+d.productModel[e].name+"' class='img-fluid modal-img'/>",r+="</div></div><div class='col-sm-5 p-0'><div class='product-des'><h2 class='title'>"+d.productModel[e].name+"</h2>",!0===d.productModel[e].discounted?r+="<h2 class='price' style='color: #7d7d7d;'>$ "+d.productModel[e].discount_rate+"<span class='was'>$ "+d.productModel[e].price+"</span> </h2>":r+="<h2 class='price' style='color: #7d7d7d;'>$ "+d.productModel[e].price+"</h2>",null!==d.productModel[e].short_description&&""!==d.productModel[e].short_description&&(r+="<p>"+d.productModel[e].short_description+"</p>"),null!==d.productModel[e].full_description&&""!==d.productModel[e].full_description&&(r+="<p>"+d.productModel[e].full_description+"</p>"),r+="<div class='modal-inc'>",r+="<form class='add-to-cart-modal'>",r+="<input type='hidden' name='product' value='"+d.productModel[e].id+"'>",r+="<button type='submit' class='btn add-btn btn-modal'>Add to Cart</button>",r+="</form>";var t="none";!0===d.productModel[e].in_cart&&(t="block"),r+="<div class='product-increment cart-increment' style='display: "+t+";'>",r+="<div class='input-group input-number-group'>",r+="<div class='input-group-button'>",r+="<span class='input-number-decrement-modal' data-form='form-update-decrement-search-product-"+d.productModel[e].id+"'><i class='fas fa-minus'></i></span>",r+="</div>",r+="<input class='input-number' type='number' value='"+d.productModel[e].in_cart_quantity+"' disabled>",r+="<div class='input-group-button'>",r+="<span class='input-number-increment-modal' data-form='form-update-increment-search_product-"+d.productModel[e].id+"'><i class='fas fa-plus'></i></span>",r+="</div>",r+="</div>",r+="<div class='modal-bin product-component-modal-delete' style='cursor: pointer;' data-form='form-delete-product-search-"+d.productModel[e].id+"'>",r+="<i class='fa fa-trash ' aria-hidden='true'>",r+="</i>",r+="</div>",r+="</div>",r+='<form method="POST" id="form-update-increment-search_product-'+d.productModel[e].id+'" style="display: none;">',r+='<input type="hidden" name="product" value="'+d.productModel[e].id+'">',r+="</form>",r+='<form method="POST" id="form-update-decrement-search-product-'+d.productModel[e].id+'" style="display: none;">',r+='<input type="hidden" name="product" value="'+d.productModel[e].id+'">',r+='<input type="hidden" name="decrement" value="1">',r+="</form>",r+='<form method="POST" id="form-delete-product-search-'+d.productModel[e].id+'" style="display: none;">',r+='<input type="hidden" name="product" value="'+d.productModel[e].id+'">',r+="</form>",r+="</div>",r+="</div>",r+="</div>",r+="</div>",r+="</div>",r+="</div>",r+="<div class='pb-cimplux'><img class='img-fluid' src='/static/"+d.variables.search_modal_logo+"' alt='Powered by "+d.variables.powered_by+"'></div>",r+="</div>",r+="</div>"}}),5<d.productModel.length)var e="<button type='submit' class='btn search-btn'>Show more</button>";var s=$("#search-product-section"),c=$("#search-category-brand-section"),i=$("#search-category-section"),l=$("#search-brand-section");""!=t?($(".search_brand").empty(),s.removeClass("col-md-12"),s.addClass("col-md-7"),c.show(),l.show(),$(".search_brand").append(t)):($(".search_brand").empty(),s.removeClass("col-md-7"),s.addClass("col-md-12"),c.hide(),l.hide()),""!=a?($(".search_category").empty(),s.removeClass("col-md-12"),s.addClass("col-md-7"),c.show(),i.show(),$(".search_category").append(a)):($(".search_category").empty(),s.removeClass("col-md-7"),s.addClass("col-md-12"),c.hide(),i.hide()),""!=o?($(".search_product").empty(),$(".search_product").append(o),$(".show_more_product").empty(),$(".show_more_product").append(e)):(o+="<li>No Products Found</li>",$(".search_product").empty(),$(".search_product").append(o),$(".show_more_product").empty()),""!=r&&($(".search-modal").empty(),$(".search-modal").append(r)),$(".add-to-cart-modal").submit(function(e){e.preventDefault();var t=$(this).serialize(),d=$(this).find("input[name=product]").val();updateCart(t,d)}),$(".input-number-increment-modal").click(function(){var e=$("#"+$(this).attr("data-form")),t=e.find("input[name=product]").val();updateCart(e.serialize(),t)}),$(".input-number-decrement-modal").click(function(){var e=$("#"+$(this).attr("data-form")),t=e.find("input[name=product]").val();updateCart(e.serialize(),t)}),$(".product-component-modal-delete").click(function(){var e=$("#"+$(this).attr("data-form")),t=e.find("input[name=product]").val();deleteItemFromCart(e.serialize(),t)}),$(".wishlist-box a").click(function(){var e=$(this).attr("data-wishlist-product");wishlist(e)})}}):$(".search-result").css("display","none")}function csrfSafeMethod(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)}function csrftoken(){return $("[name=csrfmiddlewaretoken]").val()}$(document).ready(function(){$.ajaxSetup({beforeSend:function(e,t){csrfSafeMethod(t.type)||this.crossDomain||e.setRequestHeader("X-CSRFToken",csrftoken())}});var t=null;$("#search_desktop, #search_mobile").on("touchstart input paste",function(){var e=this;null!==t&&clearTimeout(t),t=setTimeout(function(){DoSearch($(e).val())},300)}),$("#search_product .product").click(function(){var e=$(this).attr("data-target");$(e).modal({show:!0,backdrop:"static",keyboard:!0})}),$(".btn-close").on("click",function(){$(".search-result").css("display","none"),$("#search_desktop").val(""),$("#search_mobile").val("")})});